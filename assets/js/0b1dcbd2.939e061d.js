"use strict";(self.webpackChunkvolatile=self.webpackChunkvolatile||[]).push([[1935],{5659:e=>{e.exports=JSON.parse('{"permalink":"/blog/mihomo-useage","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-04-17-mihomo.md","source":"@site/blog/2025-04-17-mihomo.md","title":"Mihomo \u4f7f\u7528\u4ecb\u7ecd","description":"\u4f7f\u7528 systemd","date":"2025-04-17T00:00:00.000Z","tags":[{"inline":false,"label":"Hola","permalink":"/blog/tags/hola","description":"Hola tag description"},{"inline":false,"label":"Docusaurus","permalink":"/blog/tags/docusaurus","description":"Docusaurus tag description"}],"readingTime":1.25,"hasTruncateMarker":false,"authors":[{"name":"Zhengguang Li","title":"Senior Java Software Engineer","url":"https://github.com/zhengguangli","page":{"permalink":"/blog/authors/zhengguangli"},"socials":{"x":"https://x.com/lizg_volatile","github":"https://github.com/zhengguangli"},"imageURL":"https://pbs.twimg.com/profile_images/1912531007225622530/v2wG_Ro6_400x400.png","key":"zhengguangli"}],"frontMatter":{"slug":"mihomo-useage","title":"Mihomo \u4f7f\u7528\u4ecb\u7ecd","authors":["zhengguangli"],"tags":["hola","docusaurus"],"hide":["toc"]},"unlisted":false,"nextItem":{"title":"QA \u5e94\u7528\u4f7f\u7528\u4ecb\u7ecd","permalink":"/blog/qa-application-useage"}}')},8103:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var l=s(5659),o=s(4848),t=s(8453);const i={slug:"mihomo-useage",title:"Mihomo \u4f7f\u7528\u4ecb\u7ecd",authors:["zhengguangli"],tags:["hola","docusaurus"],hide:["toc"]},a=void 0,r={authorsImageUrls:[void 0]},c=[{value:"\u4f7f\u7528 systemd",id:"\u4f7f\u7528-systemd",level:2}];function m(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"\u4f7f\u7528-systemd",children:"\u4f7f\u7528 systemd"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 ",(0,o.jsx)(n.a,{href:"https://github.com/MetaCubeX/mihomo/releases",children:"releases"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["\u5c06\u4e0b\u8f7d\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u91cd\u540d\u540d\u4e3a ",(0,o.jsx)(n.code,{children:"mihomo"})," \u5e76\u79fb\u52a8\u5230 ",(0,o.jsx)(n.code,{children:"/usr/local/bin/"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\uff0c\u8fd0\u884c mihomo\u3002"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5c06 mihomo \u4e8c\u8fdb\u5236\u6587\u4ef6\u590d\u5236\u5230 /usr/local/bin, \u914d\u7f6e\u6587\u4ef6\u590d\u5236\u5230 /etc/mihomo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"cp mihomo /usr/local/bin\r\ncp config.yaml /etc/mihomo\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u4e0b\u8f7d ",(0,o.jsx)(n.em,{children:"country.mmdb"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"cdd /etc/mihomo\r\nwget https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u521b\u5efa systemd \u914d\u7f6e\u6587\u4ef6 ",(0,o.jsx)(n.code,{children:"/etc/systemd/system/mihomo.service"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",children:"[Unit]\r\nDescription=mihomo Daemon, Another Clash Kernel.\r\nAfter=network.target NetworkManager.service systemd-networkd.service iwd.service\r\n\r\n[Service]\r\nType=simple\r\nLimitNPROC=500\r\nLimitNOFILE=1000000\r\nCapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE CAP_SYS_TIME CAP_SYS_PTRACE CAP_DAC_READ_SEARCH CAP_DAC_OVERRIDE\r\nAmbientCapabilities=CAP_NET_ADMIN CAP_NET_RAW CAP_NET_BIND_SERVICE CAP_SYS_TIME CAP_SYS_PTRACE CAP_DAC_READ_SEARCH CAP_DAC_OVERRIDE\r\nRestart=always\r\nExecStartPre=/usr/bin/sleep 1s\r\nExecStart=/usr/local/bin/mihomo -d /etc/mihomo\r\nExecReload=/bin/kill -HUP $MAINPID\r\n\r\n[Install]\r\nWantedBy=multi-user.target\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u91cd\u65b0\u52a0\u8f7d systemd:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"systemctl daemon-reload\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u542f\u7528 mihomo \u670d\u52a1\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"systemctl enable mihomo\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u7acb\u5373\u542f\u52a8 mihomo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"systemctl start mihomo\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4f7f mihomo \u91cd\u65b0\u52a0\u8f7d\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"systemctl reload mihomo\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5 mihomo \u7684\u8fd0\u884c\u72b6\u51b5\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"systemctl status mihomo\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5 mihomo \u7684\u8fd0\u884c\u65e5\u5fd7\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"journalctl -u mihomo -o cat -e\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u6216"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"journalctl -u mihomo -o cat -f\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var l=s(6540);const o={},t=l.createContext(o);function i(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);